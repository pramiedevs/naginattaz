<!DOCTYPE html>
<html lang="ES">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clases</title>
    <link rel="stylesheet" href="./clases-styles.css">
    <script src="userPic.js" defer></script>
    <script src="https://player.vimeo.com/api/player.js"></script>
</head>
<body class="no-scrollbar">
    <div class="header">
        <div class="logo">
            <img src="LOGOS_1.png">
        </div>
        <div>
            <H1>
                HIP-HOP 101
            </H1>
        </div>
        <nav class="menu">
            <a href="https://joaconavarro.github.io/naginattaz/">INICIO</a>
            <a href="https://joaconavarro.github.io/naginattaz/pages/clases.html">CLASES</a>
            <a href="#">NAGIDATTAZ</a>
        </nav>
        <div class="header-right">
            <div id="user-info">
                <img id="user-pic" alt="User Picture" style="border-radius: 50%; width: 70px; height: 70px;">
            </div>  
            <button id="logout-button">Salir</button>
        </div>
    </div>
    
    <div class="main-section">
        <img class="main-img" id="mainImage" src="" alt="Main Image" style="display: none;">
        <iframe id="mainVideo" style="display: block;" frameborder="0" allow="autoplay; fullscreen; picture-in-picture; clipboard-write" src="" title="Main Vimeo Video"></iframe>
        
    </div>
    

    <div class="info-carousel-section">
        <div class="video-info">
            <div class="video-title">Clase Hip-Hop 101 - Nivel Principiante</div>
            <br>
            <div class="descripcion">
                    <h3>Programa:</h3>
                    <li>
                        Clase 1 - Introducción al Hip-Hop
                    </li>
                    <br>
                    <li>
                        Clase 2 - Primera coreo
                    </li>
                    <br>
                    <li>
                        Clase 3 - Segunda coreo
                    </li>
                    <br>
                    <li>
                        Clase 4 - Tercera coreo
                    </li>
                    <br>
                    <li>
                        Clase 5 - Pasos avanzados
                    </li>
                    <br>
                    <li>
                        Clase 6 - Integración
                    </li>
            </div>
        </div>

        <div class="carousel-section">
            <div class="carousel-container">
                <div class="carousel" id="carousel">
                    <div class="carousel-item">
                        <div class="carousel-item">
                            <img class="carousel-item-img" id="clase1" src="https://i.vimeocdn.com/video/1019631883.jpg" data-url="https://player.vimeo.com/video/1019631883" alt="Clase 1">
                            <div class="carousel-label">Introducción al Hip Hop - Duración: 1 minuto</div>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <img class="carousel-item-img" src="https://img.youtube.com/vi/_CL6n0FJZpk/maxresdefault.jpg" data-url="https://www.youtube.com/embed/_CL6n0FJZpk?si=C0vkHPF2aBjsWzOt" alt="Clase 2">
                        <div class="carousel-label">Clase 2 - Primera coreo - Duración: 41 minutos</div>
                    </div>
                    <div class="carousel-item">                    
                        <img class="carousel-item-img" src="https://img.youtube.com/vi/dQw4w9WgXcQ/maxresdefault.jpg" data-url="https://www.youtube.com/embed/dQw4w9WgXcQ" alt="Clase 3">
                        <div class="carousel-label">Clase 3</div>
                    </div>
                    <div class="carousel-item">
                        <img class="carousel-item-img" src="https://img.youtube.com/vi/_CL6n0FJZpk/maxresdefault.jpg" data-url="https://www.youtube.com/embed/_CL6n0FJZpk?si=C0vkHPF2aBjsWzOt" alt="Clase 4">
                        <div class="carousel-label">Clase 4</div>
                    </div>
                    <div class="carousel-item">
                        <img class="carousel-item-img" src="https://img.youtube.com/vi/_CL6n0FJZpk/maxresdefault.jpg" data-url="https://www.youtube.com/embed/_CL6n0FJZpk?si=C0vkHPF2aBjsWzOt" alt="Clase 4">
                        <div class="carousel-label">Clase 5</div>
                    </div>
                    <div class="carousel-item">
                        <img class="carousel-item-img" src="https://img.youtube.com/vi/_CL6n0FJZpk/maxresdefault.jpg" data-url="https://www.youtube.com/embed/_CL6n0FJZpk?si=C0vkHPF2aBjsWzOt" alt="Clase 4">
                        <div class="carousel-label">Clase 6 - Integración</div>
                        <div class="carousel-label">Duración - 60 minutos</div>
                    </div>
                    <br>
                    <!-- More carousel items here -->
                </div>
            </div>
        </div>
    </div>

    <script>
    const mainImage = document.getElementById('mainImage');
    const mainVideo = document.getElementById('mainVideo');
    const carouselItems = document.querySelectorAll('.carousel-item-img');
    const headerHeight = 120; // Fixed header height

    // Disable scroll restoration
    window.history.scrollRestoration = 'manual';

    // Function to load the video and thumbnail for a specific carousel item
    function loadVideo(item) {
        const videoUrl = item.getAttribute('data-url');
        const videoId = videoUrl.split('/').pop(); // Extract the video ID

        // Set the thumbnail image source using the video ID
        mainImage.src = `https://i.vimeocdn.com/video/${videoId}.jpg`; // Set thumbnail URL
        mainImage.style.display = 'block'; // Show the thumbnail

        // Set the iframe source to the video and show it
        mainVideo.style.display = 'block';
        mainVideo.src = videoUrl + "?autoplay=1&muted=1"; // Ensure autoplay and mute are included

        // Smooth scroll to the main section, accounting for the header height
        window.scrollTo({
            top: document.querySelector('.main-section').offsetTop - headerHeight,
            behavior: 'smooth'
        });
    }

    // Video Scripts for carousel items
    document.querySelectorAll('.carousel-item-img').forEach(img => {
        img.addEventListener('click', () => {
            loadVideo(img); // Load video when carousel item is clicked
        });
    });

    // Load the first video when the page loads and reset scroll position
    window.onload = () => {
        loadVideo(carouselItems[0]); // Load the first video
        window.scrollTo(0, 0); // Reset scroll position to the top
    };
    
        // Scroll the carousel
        function scrollCarousel(direction) {
            const itemHeight = carouselItems[0].offsetHeight + parseInt(window.getComputedStyle(carouselItems[0]).marginBottom);
            const visibleItems = Math.floor(carouselContainer.offsetHeight / itemHeight);
    
            if (direction === 'up') {
                scrollAmount -= itemHeight;
                if (scrollAmount < 0) scrollAmount = 0;
            } else {
                scrollAmount += itemHeight;
                if (scrollAmount > (carouselItems.length - visibleItems) * itemHeight) {
                    scrollAmount = (carouselItems.length - visibleItems) * itemHeight;
                }
            }
    
            carousel.style.transform = `translateY(-${scrollAmount}px)`;
        }
    
        // Optional JavaScript for carousel drag-to-scroll interaction
        const carouselContainer = document.querySelector('.carousel-container');
        let startY, scrollTop;
        let isDragging = false; // Flag to track dragging state
    
        carouselContainer.addEventListener('mousedown', (e) => {
            startY = e.pageY - carouselContainer.offsetTop;
            scrollTop = carousel.scrollTop;
            isDragging = true; // Set dragging flag to true
            carouselContainer.style.cursor = 'grabbing';
            carouselContainer.style.transition = 'none';
        });
    
        carouselContainer.addEventListener('mouseleave', () => {
            if (isDragging) {
                isDragging = false; // Reset dragging flag
                carouselContainer.style.cursor = 'grab';
                carouselContainer.style.transition = 'all 0.3s ease';
            }
        });
    
        carouselContainer.addEventListener('mouseup', () => {
            if (isDragging) {
                isDragging = false; // Reset dragging flag
                carouselContainer.style.cursor = 'grab';
                carouselContainer.style.transition = 'all 0.3s ease';
            }
        });
    
        carouselContainer.addEventListener('mousemove', (e) => {
            if (isDragging) {
                const y = e.pageY - carouselContainer.offsetTop;
                const walk = (y - startY) * 2; // Scroll speed
                carousel.scrollTop = scrollTop - walk;
            }
        });
    </script>
    
</body>
</html>
