<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Naginattaz Metaverso</title>
    <link rel="stylesheet" href="./styles.css">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="./calendar.js" defer></script>
    <script src="./wating.js"></script>
</head>
<body class="no-scrollbar">
    <div class="loading">
        <img src="./nagi.jpeg" alt="">
        <img src="./nagi.jpeg" alt="">
        <img src="./nagi-logo.jpeg" alt="">
    </div>

    <div id="loader">Loading...</div>

    <div id="notification" style="display: none; z-index: 100000; position: inherit; border-bottom: white 2px solid; width: 100%; height: 35px;background-color: rgb(163, 9, 104); color: white;align-items: center; justify-content: center; line-height: 20px;">
        <span id="notification-text" style="text-align: center;"></span>
        <a id="unite-button" href="./pages/subscription.html" style="padding:5px; border-radius: 5px; color: white; background-color: rgb(190, 115, 190); text-decoration: none; margin-left: 10px;">Unite</a>
    </div>

    <header class="wating" id="header">
        <div class="header-logo">
            <a href="../index.html" aria-current="page" class="navbar10_logo-link w-nav-brand w--current">
                <img src="../src/logos/LOGOS_1.png" alt="NAGINATTAZ logo in black." class="navbar10_logo icon-height-xlarge"/>
            </a>
        </div>
            <div class="left-panel desktop">
                <button onclick="showContent('section1')">INICIO</button>
                <button onclick="showContent('section2')">CLASES</button>
                <button onclick="showContent('section3')">COMUNIDAD</button>
                <button onclick="showContent('section4')">PLAYLIST</button>
                <button onclick="showContent('section5')">CALENDARIO</button>
            </div>
        <div class="header-right">
            <div id="image-preview-container" class="image-preview-container"></div>
            <input type="text" id="search-input" placeholder=" Buscar clases...">
            <button id="search" class="desktop">üîç</button>
            <div id="user-info" style="display: none;">
                <img id="user-pic" src="" alt="User Picture" style="border-radius: 50%; width: 50px; height: 50px;">
                
                <!--<h2><span id="user-email">" "</span>!</h2>-->
            </div>
            <div id="g-signin-button" style="display: none; position:absolute; top:50%;left:50%;"></div> <!-- Hidden initially -->           
            <button id="logout-button" style="display: none;">Log Out</button>
        </div>

        <div class="left-panel mobile">
            <button onclick="showContent('section1')">INICIO</button>
            <button onclick="showContent('section2')">CLASES</button>
            <button onclick="showContent('section3')">COMUNIDAD</button>
            <button onclick="showContent('section4')">PLAYLIST</button>
            <button onclick="showContent('section5')">CALENDARIO</button>
            <div id="image-preview-container" class="image-preview-container"></div>
            <input type="text" id="search-input2" class="desktop" placeholder=" Buscar clases...">
            <button id="search2">üîç</button>
            <div id="user-info" style="display: none;">
                <img id="user-pic" src="" alt="User Picture" style="border-radius: 50%; width: 50px; height: 50px;">
                
                <!--<h2><span id="user-email">" "</span>!</h2>-->
            </div>
        </div>
    </header>

        <div id="main-content" class="main-content wating">
            <div id="welcome" class="welcome-section wating">
                <h2 id="welcome-message">BIENVENIDO <span id="user-name"></span>!</h2>
                <p id="plan-info">TU PLAN ACTUAL ES BAMBU</p>
            </div>

            <script src="./google-login.js"></script>
            
            <div id="section1" class="content-section active">
                <img src="../src/BANNERPRINCIPAL_1.png" style="width:100%; margin-bottom: 2vh;">
                <img src="../src/BANNERPRINCIPAL_2.png" style="width:100%">                
            </div>
            <div id="section2" class="content-section">
                <div class="image-grid">
                    <div id="hiphop principiante">
                        <a href="./clases/index.html">
                        <img class="img-clases" src="../src/hiphop.png" loading="lazy" alt="Hip Hop Dance Style" style="filter: grayscale(1);" ></a>
                        <h3 style="width: 100%;position: absolute;bottom: -75px;z-index: 1000;">Hip Hop</h3>
                    </div>
                    <div id="contemporary principiante">
                        <img class="img-clases" src="../src/contemporary.png" loading="lazy" alt="Contemporary Dance Style" style="filter: grayscale(1);">
                        <h3 style="width: 100%;position: absolute;bottom: -75px;z-index: 1000;"> Contemporary</h3>
                    </div>
                    <div id="workout principiante">
                        <a href="./clases/index.html">
                            <img class="img-clases" src="../src/workout.png" loading="lazy" alt="Workout Dance Style" style="filter: grayscale(1);">
                        </a>
                        <h3 style="width: 100%;position: absolute;bottom: -75px;z-index: 1000;"> Workout</h3>
                    </div>                    
                </div>
            </div>
            <div id="section3" class="content-section">
                <h2>ESTILOS</h2>
                <p>Selecciona tu estilo preferido!</p>
            </div>
            <div id="section4" class="content-section">
                <h2>PLAYLIST</h2>
                <p>Selecciona playlists previamente confeccionadas por nuestro equipo de instructores para llevar a cabo tus rutinas.</p>
                <div class="spotify-container">
                <iframe src="https://open.spotify.com/embed/playlist/37i9dQZF1DXcBWIGoYBM5M" width="600" height="700" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>
                    <div class="overlay"></div>
                </div>
                <style>
                    .spotify-container {
                    margin-top:4vw;
                    height: 700px; /* Adjust height as needed */
        }
                    .spotify-container {
            position: relative;
        }
        .spotify-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        .overlay {
                border-radius: 10px;
        position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgb(206 0 225 / 19%);
    pointer-events: none;
        }

                    
    </style>
            </div>


<div id="section5" class="content-section">
    <h2>CALENDARIO</h2>
    <div class="calendar-container">
        <nav class="menu">
            <button id="calendar-btn">Calendar</button>
            <button id="dance-btn">Dance Routine</button>
            <button id="exercises-btn">Exercises</button>
            <button id="diet-btn">Diet</button>
        </nav>
        <div class="content">
            <div id="calendar-section" class="section">
                <iframe src="https://calendar.google.com/calendar/embed?src=argentina%23holiday%40group.v.calendar.google.com&ctz=America%2FBuenos_Aires" style="border: 0" width="800" height="600" frameborder="0" scrolling="no"></iframe>
            </div>
            <div id="dance-section" class="section" style="display: none;">
                <table class="fixed-calendar">
                    <thead>
                        <tr>
                            <th>Domingo</th>
                            <th>Lunes</th>
                            <th>Martes</th>
                            <th>Mi√©rcoles</th>
                            <th>Jueves</th>
                            <th>Viernes</th>
                            <th>S√°bado</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Dance Routine rows here -->
                        <tr>
                            <td>Dance Class: Hip-Hop (2 hrs)</td>
                            <td>Dance Class: Ballet (2 hrs)</td>
                            <td>Dance Class: Jazz (2 hrs)</td>
                            <td>Dance Class: Contemporary (2 hrs)</td>
                            <td>Dance Class: Salsa (2 hrs)</td>
                            <td>Dance Class: Breakdance (2 hrs)</td>
                            <td>Free Day</td>
                        </tr>
                        <!-- More rows as needed -->
                    </tbody>
                </table>
            </div>
            <div id="exercises-section" class="section" style="display: none;">
                <table class="fixed-calendar">
                    <thead>
                        <tr>
                            <th>Domingo</th>
                            <th>Lunes</th>
                            <th>Martes</th>
                            <th>Mi√©rcoles</th>
                            <th>Jueves</th>
                            <th>Viernes</th>
                            <th>S√°bado</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Exercises rows here -->
                        <tr>
                            <td>Cardio + Upper Body (1 hr)</td>
                            <td>Leg Day + Abs (1 hr)</td>
                            <td>Cardio + Full Body Stretch (1 hr)</td>
                            <td>Upper Body Strength (1 hr)</td>
                            <td>Lower Body Strength (1 hr)</td>
                            <td>Yoga + Flexibility (1 hr)</td>
                            <td>Rest Day</td>
                        </tr>
                        <!-- More rows as needed -->
                    </tbody>
                </table>
            </div>
            <div id="diet-section" class="section" style="display: none;">
                <table class="fixed-calendar">
                    <thead>
                        <tr>
                            <th>Domingo</th>
                            <th>Lunes</th>
                            <th>Martes</th>
                            <th>Mi√©rcoles</th>
                            <th>Jueves</th>
                            <th>Viernes</th>
                            <th>S√°bado</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
        <td>Desayuno: Avena con Frutas</td>
        <td>Desayuno: Yogur Griego con Frutos Secos</td>
        <td>Desayuno: Batido con Espinacas</td>
        <td>Desayuno: Panqueques de Grano Integral</td>
        <td>Desayuno: Pud√≠n de Ch√≠a</td>
        <td>Desayuno: Huevos con Tostada de Aguacate</td>
        <td>Desayuno: Taz√≥n de Batido de Frutas</td>
    </tr>
    <tr>
        <td>Almuerzo: Ensalada de Pollo a la Parrilla</td>
        <td>Almuerzo: Taz√≥n de Quinoa y Vegetales</td>
        <td>Almuerzo: S√°ndwich de Pavo con Vegetales</td>
        <td>Almuerzo: Wrap de Pollo con Aguacate</td>
        <td>Almuerzo: Salteado de Vegetales con Tofu</td>
        <td>Almuerzo: Salteado de Carne de Res con Br√≥coli</td>
        <td>Almuerzo: Ensalada de At√∫n</td>
    </tr>
    <tr>
        <td>Cena: Salm√≥n al Horno con Vegetales</td>
        <td>Cena: Tofu Salteado con Arroz</td>
        <td>Cena: Sopa de Lentejas con Ensalada</td>
        <td>Cena: Espaguetis con Salsa Marinara</td>
        <td>Cena: Camarones a la Parrilla con Quinoa</td>
        <td>Cena: Batatas al Horno con Verduras</td>
        <td>Cena: Pizza Vegetariana con Masa Integral</td>
    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
            
            <div id="section6" class="content-section">
                <h2>COMUNIDAD NAGINATTAZ</h2>

                <!--
                <div id="result"></div>
                <script src="displayPHP.js"></script>
                -->
                
            </div>
        </div>
    </div>

    <script>

    // Check if the user is logged in
    if (sessionStorage.getItem('loggedIn') !== 'true') {
        window.location.href = './login.html'; 
    }


        // Toggle the search input and set up event listeners
        document.getElementById('search').addEventListener('click', function() {
            var searchInput = document.getElementById('search-input');
            var imagePreview = document.getElementById('image-preview');

            if (searchInput.classList.contains('visible')) {
                searchInput.classList.remove('visible');
                //imagePreview.style.display = 'none';
                resetSection2();
            } else {
                searchInput.classList.add('visible');
                searchInput.focus();
            }
        });

        // Toggle the search input and set up event listeners
        document.getElementById('search2').addEventListener('click', function() {
            var searchInput = document.getElementById('search-input2');
            var imagePreview = document.getElementById('image-preview');

            if (searchInput.classList.contains('visible')) {
                searchInput.classList.remove('visible');
                searchInput.classList.remove('desktop');
                //imagePreview.style.display = 'none';
                resetSection2();
            } else {
                searchInput.classList.add('visible');
                searchInput.classList.add('desktop');
                searchInput.focus();
            }
        });

        function showContent(sectionId) {
        var sections = document.querySelectorAll('.content-section');
        sections.forEach(function(section) {
            section.classList.remove('active');
        });
        document.getElementById(sectionId).classList.add('active');
    }
// Handle the search input
document.getElementById('search-input').addEventListener('input', function() {
    var query = this.value.toLowerCase();
    var imagePreviewContainer = document.getElementById('image-preview-container');
    var imageGridItems = document.querySelectorAll('#section2 .image-grid div');

    // Clear the previous preview images
    imagePreviewContainer.innerHTML = '';

    if (query) {
        var found = false;
        imageGridItems.forEach(function(item) {
            if (item.id.includes(query)) {
                item.style.display = 'block';
                var img = item.querySelector('img').src;

                // Create a new preview image for each match
                var previewImg = document.createElement('img');
                previewImg.src = img;
                previewImg.classList.add('image-preview');
                previewImg.style.display = 'inline-block';
                previewImg.addEventListener('click', function() {
                    // Simulate clicking the "CLASES" button to show section2
                    document.querySelector('button[onclick="showContent(\'section2\')"]').click();
                    
                });

                // Add the preview image to the container
                imagePreviewContainer.appendChild(previewImg);
                found = true;
            } else {
                item.style.display = 'none';
            }
        });

        if (!found) {
            imagePreviewContainer.innerHTML = ''; // Clear if no matches
        }
    } else {
        imagePreviewContainer.innerHTML = ''; // Clear previews if search input is cleared

        // Check if section2 is currently active
        if (document.getElementById('section2').classList.contains('active')) {
            resetSection2(); // Reset only if in section2
        }
    }
});

// Handle the search input
document.getElementById('search-input2').addEventListener('input', function() {
    var query = this.value.toLowerCase();
    var imagePreviewContainer = document.getElementById('image-preview-container');
    var imageGridItems = document.querySelectorAll('#section2 .image-grid div');

    // Clear the previous preview images
    imagePreviewContainer.innerHTML = '';

    if (query) {
        var found = false;
        imageGridItems.forEach(function(item) {
            if (item.id.includes(query)) {
                item.style.display = 'block';
                var img = item.querySelector('img').src;

                // Create a new preview image for each match
                var previewImg = document.createElement('img');
                previewImg.src = img;
                previewImg.classList.add('image-preview');
                previewImg.style.display = 'inline-block';
                previewImg.addEventListener('click', function() {
                    // Simulate clicking the "CLASES" button to show section2
                    document.querySelector('button[onclick="showContent(\'section2\')"]').click();
                    
                });

                // Add the preview image to the container
                imagePreviewContainer.appendChild(previewImg);
                found = true;
            } else {
                item.style.display = 'none';
            }
        });

        if (!found) {
            imagePreviewContainer.innerHTML = ''; // Clear if no matches
        }
    } else {
        imagePreviewContainer.innerHTML = ''; // Clear previews if search input is cleared

        // Check if section2 is currently active
        if (document.getElementById('section2').classList.contains('active')) {
            resetSection2(); // Reset only if in section2
        }
    }
});

// Reset section2 to show all items
function resetSection2() {
    var imageGridItems = document.querySelectorAll('#section2 .image-grid div');
    imageGridItems.forEach(function(item) {
        item.style.display = 'block';
    });
}

const plans = {
    "joaconavarro.untref@gmail.com": "",
    "paurocker993@gmail.com": "BAMB√ö",
    "nagitest@gmail.com": "ACERO",
    "pramietest@gmail.com": "OBSIDIAN",
    "durquiza311@gmail.com": "OBSIDIAN"
};
function updatePlan(userEmail) {
    const planInfoElement = document.getElementById("plan-info");
    const userNameElement = document.getElementById("user-name");
    const bodyElement = document.body;
    const notificationElement = document.getElementById("notification");
    const notificationText = document.getElementById("notification-text");

    userNameElement.textContent = userEmail.split('@')[0]; // Extract the username

    // Check if the user email exists in the plans object
    let plan = plans[userEmail] || "BAMB√ö"; // Assign BAMB√ö as default if no plan is found
    planInfoElement.textContent = `TU PLAN ACTUAL ES ${plan}`;

    // Change the background color based on the plan
    switch (plan) {
        case "BAMB√ö":
            bodyElement.style.backgroundColor = "yellowgreen";
            notificationElement.style.display = "flex"; // Show notification for BAMB√ö
            notificationText.textContent = "Todav√≠a no sos Obsidian? Unite al plan y desbloque√° todo el contenido!";
            break;
        case "ACERO":
            bodyElement.style.backgroundColor = "grey";
            notificationElement.style.display = "flex"; // Show notification for ACERO
            notificationText.textContent = "Todav√≠a no sos Obsidian? Unite al plan y desbloque√° todo el contenido!";
            break;
        case "OBSIDIAN":
            bodyElement.style.backgroundColor = "violet";
            notificationElement.style.display = "none"; // Hide notification if Obsidian
            return; // Exit the function for Obsidian
        default:
            // Mimic BAMB√ö behavior for default case
            bodyElement.style.backgroundColor = "red"; // Set to BAMB√ö background
            notificationElement.style.display = "flex"; // Show notification
            notificationText.textContent = "Todav√≠a no sos Obsidian? Unite al plan y desbloque√° todo el contenido!";
            break;
    }
}




// Plan display script
function updatePlanFromStorage() {
    const userEmail = localStorage.getItem('userEmail');
    if (userEmail) {
        updatePlan(userEmail);
    }
}
updatePlanFromStorage();
// Call the function with the logged-in user's email
updatePlan(userInfoData.email);

// Clear session storage on page unload
window.addEventListener('beforeunload', function () {
        sessionStorage.removeItem('userEmail');
        sessionStorage.removeItem('userPic');
        sessionStorage.removeItem('idToken');
        sessionStorage.removeItem('loggedIn');
    });



    </script>
    <script src="https://accounts.google.com/gsi/client" async></script>
</body>
</html>
